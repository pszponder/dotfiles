#!/usr/bin/env bash

set -e  # Exit immediately on any error

echo "üîß Running setup tasks before applying dotfiles..."

# # Define the location of the scripts in the repo
# SCRIPTS_DIR="$(dirname "$CHEZMOI_SOURCE_DIR")/scripts"

# # ======
# # Common
# # ======

# # $SCRIPTS_DIR/common/initialize_home.sh
# # $SCRIPTS_DIR/common/initialize_ssh_config.sh

# # ============
# # Detect macOS
# # ============
# if [[ "$(uname)" == "Darwin" ]]; then
#   echo "üçé Detected macOS"

#   # Install brew if not installed
#   if ! command -v brew &>/dev/null; then
#     echo "üîß Installing Homebrew..."
#     /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
#   else
#     echo "Homebrew is already installed."
#   fi

#   exit 0
# fi

# # =========================
# # Detect Linux distribution
# # =========================
# echo "üîç Detecting Linux distribution..."
# if [[ -f /etc/os-release ]]; then
#   . /etc/os-release
#   DISTRO_ID="${ID,,}"
# else
#   echo "‚ùå Could not determine Linux distribution."
#   exit 1
# fi

# echo "üêß Detected Linux distro: $DISTRO_ID"

# # =====================
# # üì¶ Common Linux steps
# # =====================
# # $CHEZMOI_SOURCE_DIR/scripts/install_podman_cli.sh

# # =================================
# # üì¶ Linux distro-specific sections
# # =================================

# # Arch
# if [[ "$DISTRO_ID" == "arch" ]]; then
#   $SCRIPTS_DIR/arch/_install_arch.sh
#   exit 0
# fi

# # Ubuntu or Debian
# if [[ "$DISTRO_ID" == "ubuntu" || "$DISTRO_ID" == "debian" ]]; then
#   $SCRIPTS_DIR/ubuntu/_install_ubuntu.sh
#   exit 0
# fi

# # Fedora
# if [[ "$DISTRO_ID" == "fedora" ]]; then
#   $SCRIPTS_DIR/fedora/_install_fedora.sh
#   exit 0
# fi
